<%*
// 강의 학습 자동화 시스템 초기화
// 이 템플릿은 강의 파일에서 자동 진행률 업데이트를 활성화합니다.

// 자동 업데이트 시스템 로드
const autoUpdaterPath = app.vault.adapter.basePath + '/.obsidian/scripts/lecture-auto-updater.js';
try {
    if (window.lectureUpdater) {
        // 이미 로드된 경우 새로고침
        window.lectureUpdater = null;
    }
    
    // 스크립트 로드 및 실행
    const scriptContent = await app.vault.adapter.read('.obsidian/scripts/lecture-auto-updater.js');
    const LectureProgressUpdater = eval(`(function() { ${scriptContent}; return LectureProgressUpdater; })()`);
    
    window.lectureUpdater = new LectureProgressUpdater(app);
    
    // 현재 파일에 대해 즉시 이벤트 리스너 설정
    setTimeout(() => {
        window.lectureUpdater.setupCheckboxListeners();
    }, 500);
    
    new Notice('✅ 강의 학습 자동화 시스템이 활성화되었습니다!');
    
} catch (error) {
    console.error('자동화 시스템 로드 오류:', error);
    new Notice('⚠️ 자동화 시스템 로드 중 오류가 발생했습니다. 수동 업데이트를 사용하세요.');
}

// 현재 파일이 강의 파일인지 확인하고 초기 진행률 계산
const currentFile = tp.file.find_tfile(tp.file.path(true));
if (currentFile) {
    const content = await app.vault.read(currentFile);
    const completedSegments = (content.match(/- \[x\] \*\*학습 완료\*\* ✅ #강의학습/g) || []).length;
    const totalSegments = (content.match(/- \[.\] \*\*학습 완료\*\* ✅ #강의학습/g) || []).length;
    
    if (totalSegments > 0) {
        const progressPercent = Math.round((completedSegments / totalSegments) * 100);
        
        // Properties 업데이트
        await app.fileManager.processFrontMatter(currentFile, (frontmatter) => {
            frontmatter["completed-segments"] = completedSegments;
            
            let status = "미시작";
            if (completedSegments === totalSegments && totalSegments > 0) {
                status = "완료";
            } else if (completedSegments > 0) {
                status = "진행중";
            }
            frontmatter["status"] = status;
        });
    }
}
%>

# 🔄 자동화 시스템 활성화

✅ **강의 학습 자동화 시스템이 활성화되었습니다!**

## 🎯 활성화된 기능들

### ⚡ 실시간 진행률 업데이트
- 체크박스 클릭 시 자동으로 `completed-segments` 업데이트
- 상태 자동 변경: 미시작 → 진행중 → 완료
- 시작/완료 시간 자동 기록

### 📊 대시보드 연동
- 진행률 변경 시 대시보드 자동 새로고침
- 실시간 통계 업데이트
- 시리즈별 진행 현황 반영

### 🔔 알림 시스템
- 구간 완료 시 진행률 알림
- 강의 완료 시 축하 메시지
- 오류 발생 시 경고 알림

---

## 🎮 사용법

1. **각 구간의 체크박스 클릭** ✅
2. **자동으로 진행률 업데이트됨** 📈
3. **대시보드에서 실시간 확인** 📊

---

**💡 팁**: 이제 체크박스만 클릭하면 모든 것이 자동으로 업데이트됩니다!

[[📊 강의학습 대시보드 (Properties)]]에서 실시간 진행 상황을 확인하세요.
