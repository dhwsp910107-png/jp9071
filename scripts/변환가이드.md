# 문제 파일 Frontmatter 변환 가이드

## 📌 개요

현재 문제 파일은 제목 형식(`## 헤딩`)으로 되어 있어서 DataviewJS가 메타데이터를 읽을 수 없습니다.
이 스크립트는 문제 파일을 frontmatter 형식으로 변환하여 DataviewJS와 호환되게 만듭니다.

## 🔄 변환 전후 비교

### 변환 전 (제목 형식)
```markdown
# 岸 문제

## 한자
岸

## 번호
20

## 폴더
기본

## 문제
岸의 음과 뜻은?

## 선택지
- 간/방패 간
- 간/새길 간
- 안/언덕 안
- 한/가물 한

## 정답
2
```

### 변환 후 (frontmatter 형식)
```markdown
---
hanzi: "岸"
number: 20
folder: 기본
question: "岸의 음과 뜻은?"
options:
  - "간/방패 간"
  - "간/새길 간"
  - "안/언덕 안"
  - "한/가물 한"
answer: 2
difficulty: C
bookmarked: false
correctCount: 0
wrongCount: 0
---

# 岸 문제

## 문제
岸의 음과 뜻은?

## 선택지
- 간/방패 간
- 간/새길 간
- 안/언덕 안
- 한/가물 한
```

## 🚀 실행 방법

### 방법 1: 간단한 스크립트 (추천)

1. **Obsidian 개발자 도구 열기**
   - Windows: `Ctrl + Shift + I`
   - Mac: `Cmd + Option + I`

2. **Console 탭으로 이동**

3. **스크립트 복사**
   - `scripts/convert-questions-simple.js` 파일 내용 전체 복사

4. **콘솔에 붙여넣고 Enter**

5. **결과 확인**
   ```
   🚀 문제 파일 변환 시작...
   📄 총 70개 파일 발견
   
   ✅ [1/70] 변환 완료: 1_fg.md
   ✅ [2/70] 변환 완료: 2_託.md
   ...
   📊 진행률: 100%
   
   🎉 변환 완료!
   📊 결과:
     ✅ 변환됨: 70개
     ⏭️  이미 변환됨: 0개
     ❌ 실패: 0개
     📄 총: 70개
   ```

### 방법 2: 고급 스크립트 (더 많은 기능)

`scripts/convert-to-frontmatter.js`를 사용하면:
- 여러 폴더 일괄 변환
- Dry run 테스트 모드
- 상세한 오류 보고
- 진행률 표시

**사용 예:**
```javascript
// Obsidian 개발자 콘솔에서 실행

// 1. 기본 폴더만 변환
convertAllQuestions(app, 'HanziQuiz/Questions/기본', false)

// 2. 모든 Questions 하위 폴더 변환
convertAllQuestions(app, 'HanziQuiz/Questions', false)

// 3. 테스트 실행 (실제 변환 안 함)
convertAllQuestions(app, 'HanziQuiz/Questions/기본', true)
```

## ⚙️ 설정 변경

### 폴더 경로 변경
`convert-questions-simple.js` 파일 3번째 줄:
```javascript
const folderPath = 'HanziQuiz/Questions/기본'; // 여기를 변경
```

다른 폴더로 변경 예:
```javascript
const folderPath = 'HanziQuiz/Questions/100번대 독음_복사본';
```

### 테스트 모드 활성화
```javascript
const dryRun = true; // 실제 변환하지 않고 테스트만
```

## 🔒 안전장치

1. **이미 변환된 파일 건너뛰기**
   - frontmatter가 있는 파일은 자동으로 건너뜀
   - 중복 변환 방지

2. **원본 데이터 보존**
   - 본문 내용도 함께 유지됨
   - 데이터 손실 없음

3. **테스트 모드**
   - `dryRun = true`로 설정하면 실제 변환 없이 시뮬레이션

## ⚠️ 주의사항

1. **백업 권장**
   - 변환 전 중요한 문제 파일은 백업하세요
   - Obsidian은 자동으로 `.obsidian/workspace` 폴더에 백업함

2. **한 번에 소수 파일로 테스트**
   - 처음에는 테스트 폴더로 시도
   - 문제없으면 전체 변환

3. **플러그인 리로드**
   - 변환 후 quiz-sp2 플러그인 껐다 켜기
   - `Ctrl + R` (Obsidian 리로드)

## 📊 변환 후 확인사항

### 1. DataviewJS 작동 확인
문제목록 페이지에서 통계가 제대로 표시되는지 확인:
- 📚 총 문제
- ⭐ 북마크
- 🏆 난이도별 분포

### 2. 퀴즈 플러그인 작동 확인
- 문제 로딩 정상 작동
- 통계 업데이트 정상
- 북마크/난이도 변경 정상

## 🐛 문제 해결

### 문제: 변환은 됐는데 DataviewJS가 안 보여요
**해결:**
1. Dataview 플러그인 설치 확인
2. Obsidian 리로드: `Ctrl + R`
3. Dataview 설정에서 JavaScript 쿼리 활성화 확인

### 문제: 일부 파일만 변환됨
**해결:**
1. 콘솔에서 실패 로그 확인
2. 실패한 파일 수동으로 열어서 형식 확인
3. 제목 형식이 표준과 다르면 수동 수정

### 문제: 선택지가 제대로 파싱 안 됨
**해결:**
선택지 형식이 다음 중 하나여야 함:
```markdown
## 선택지
- 선택지1
- 선택지2
- 선택지3
```
또는
```markdown
## 선택지
- 선택지1- 선택지2- 선택지3
```

## ✅ 체크리스트

변환 전:
- [ ] 중요 파일 백업 완료
- [ ] 테스트 폴더로 먼저 시도
- [ ] 개발자 콘솔 열기

변환 중:
- [ ] 진행률 확인
- [ ] 오류 메시지 확인
- [ ] 결과 통계 확인

변환 후:
- [ ] Obsidian 리로드
- [ ] DataviewJS 작동 확인
- [ ] 퀴즈 플러그인 작동 확인
- [ ] 샘플 문제 몇 개 수동 확인

## 📞 도움말

변환 중 문제가 생기면:
1. 콘솔 오류 메시지 복사
2. 실패한 파일명 확인
3. 해당 파일 수동으로 열어서 형식 확인

---

**마지막 업데이트:** 2025-11-12
**작성자:** quiz-sp2 플러그인 팀
