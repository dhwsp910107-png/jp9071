<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Dashboard - JavaScript í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
            color: #333;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: #f8fafc;
        }
        
        .timer-display {
            font-size: 2rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            color: #667eea;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f0f4f8;
            border-radius: 10px;
        }
        
        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn-primary { background: #667eea; color: white; }
        .btn-success { background: #10b981; color: white; }
        .btn-danger { background: #ef4444; color: white; }
        .btn-secondary { background: #6b7280; color: white; }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .result {
            background: #e6fffa;
            border: 1px solid #38b2ac;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .error {
            background: #fed7d7;
            border: 1px solid #e53e3e;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .log {
            background: #f7fafc;
            border: 1px solid #cbd5e0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“š Study Dashboard - JavaScript í…ŒìŠ¤íŠ¸</h1>
            <p>main.js íŒŒì¼ì˜ í•µì‹¬ ê¸°ëŠ¥ë“¤ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤</p>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ ê¸°ë³¸ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸</h2>
            <button class="btn btn-primary" onclick="testFormatTime()">formatTime í•¨ìˆ˜ í…ŒìŠ¤íŠ¸</button>
            <button class="btn btn-primary" onclick="testDefaultSettings()">ê¸°ë³¸ ì„¤ì • í…ŒìŠ¤íŠ¸</button>
            <div id="basic-test-result"></div>
        </div>

        <div class="test-section">
            <h2>â±ï¸ íƒ€ì´ë¨¸ ì‹œë®¬ë ˆì´ì…˜</h2>
            <div class="timer-display" id="timer-display">00:00:00</div>
            <div style="text-align: center;">
                <button class="btn btn-success" onclick="startTimerTest()">â–¶ï¸ ì‹œì‘</button>
                <button class="btn btn-danger" onclick="stopTimerTest()">â¹ï¸ ì •ì§€</button>
                <button class="btn btn-secondary" onclick="resetTimerTest()">ğŸ”„ ì´ˆê¸°í™”</button>
            </div>
            <div id="timer-result"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ“ í´ë˜ìŠ¤ êµ¬ì¡° í…ŒìŠ¤íŠ¸</h2>
            <button class="btn btn-primary" onclick="testClassStructure()">í´ë˜ìŠ¤ êµ¬ì¡° í™•ì¸</button>
            <div id="class-test-result"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š ì„¤ì •ê°’ ê²€ì¦</h2>
            <button class="btn btn-primary" onclick="testSettingsValidation()">ì„¤ì •ê°’ ìœ íš¨ì„± ê²€ì‚¬</button>
            <div id="settings-test-result"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ› ë””ë²„ê¹… ë¡œê·¸</h2>
            <div class="log" id="debug-log">í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
        </div>
    </div>

    <script>
        // ë¡œê·¸ í•¨ìˆ˜
        function log(message) {
            const logElement = document.getElementById('debug-log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        // main.jsì—ì„œ ê°€ì ¸ì˜¨ ê¸°ë³¸ ì„¤ì •
        const DEFAULT_SETTINGS = {
            problemsFolder: 'í•™ìŠµê´€ë¦¬/ë¬¸ì œì€í–‰',
            maxProblems: 500,
            dailyGoal: 5,
            targetDate: '2025-12-31',
            defaultSubject: 'ìˆ˜í•™',
            subjects: ['ìˆ˜í•™', 'ë¬¼ë¦¬', 'í™”í•™', 'ìƒë¬¼', 'ì˜ì–´', 'êµ­ì–´', 'í•œêµ­ì‚¬'],
            timerEnabled: true,
            masteredColor: '#10b981',
            reviewingColor: '#f59e0b',
            learningColor: '#ef4444'
        };

        // main.jsì—ì„œ ê°€ì ¸ì˜¨ formatTime í•¨ìˆ˜
        const formatTime = (seconds) => {
            const hrs = Math.floor(seconds / 3600);
            const mins = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            return `${String(hrs).padStart(2, '0')}:${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        };

        // íƒ€ì´ë¨¸ ìƒíƒœ ì‹œë®¬ë ˆì´ì…˜
        let timerState = {
            isRunning: false,
            seconds: 0,
            interval: null
        };

        // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë“¤
        function testFormatTime() {
            log('formatTime í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            const testCases = [
                { input: 0, expected: '00:00:00' },
                { input: 65, expected: '00:01:05' },
                { input: 3661, expected: '01:01:01' },
                { input: 7200, expected: '02:00:00' }
            ];

            let results = [];
            testCases.forEach(test => {
                const result = formatTime(test.input);
                const passed = result === test.expected;
                results.push(`${test.input}ì´ˆ â†’ ${result} (${passed ? 'âœ…' : 'âŒ ì˜ˆìƒ: ' + test.expected})`);
                log(`formatTime(${test.input}) = ${result} ${passed ? 'âœ…' : 'âŒ'}`);
            });

            document.getElementById('basic-test-result').innerHTML = 
                '<div class="result"><strong>formatTime í…ŒìŠ¤íŠ¸ ê²°ê³¼:</strong><br>' + 
                results.join('<br>') + '</div>';
        }

        function testDefaultSettings() {
            log('ê¸°ë³¸ ì„¤ì • í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            try {
                const requiredFields = ['problemsFolder', 'subjects', 'timerEnabled'];
                let results = [];
                
                requiredFields.forEach(field => {
                    const exists = DEFAULT_SETTINGS.hasOwnProperty(field);
                    results.push(`${field}: ${exists ? 'âœ… ì¡´ì¬' : 'âŒ ì—†ìŒ'}`);
                    log(`ì„¤ì • í•„ë“œ ${field}: ${exists ? 'ì¡´ì¬' : 'ì—†ìŒ'}`);
                });

                document.getElementById('basic-test-result').innerHTML += 
                    '<div class="result"><strong>ê¸°ë³¸ ì„¤ì • í…ŒìŠ¤íŠ¸:</strong><br>' + 
                    results.join('<br>') + '</div>';
            } catch (error) {
                log(`ì„¤ì • í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}`);
                document.getElementById('basic-test-result').innerHTML += 
                    '<div class="error">ì„¤ì • í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ' + error.message + '</div>';
            }
        }

        function startTimerTest() {
            if (timerState.isRunning) return;
            
            log('íƒ€ì´ë¨¸ ì‹œì‘');
            timerState.isRunning = true;
            timerState.seconds = 0;
            timerState.interval = setInterval(() => {
                timerState.seconds++;
                document.getElementById('timer-display').textContent = formatTime(timerState.seconds);
            }, 1000);

            document.getElementById('timer-result').innerHTML = 
                '<div class="result">â±ï¸ íƒ€ì´ë¨¸ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!</div>';
        }

        function stopTimerTest() {
            if (!timerState.isRunning) return;
            
            timerState.isRunning = false;
            if (timerState.interval) {
                clearInterval(timerState.interval);
                timerState.interval = null;
            }
            
            const timeSpent = timerState.seconds;
            log(`íƒ€ì´ë¨¸ ì •ì§€ - ì´ ì‹œê°„: ${formatTime(timeSpent)}`);
            
            document.getElementById('timer-result').innerHTML = 
                `<div class="result">â¹ï¸ íƒ€ì´ë¨¸ ì •ì§€! ì´ ì‹œê°„: ${formatTime(timeSpent)}</div>`;
        }

        function resetTimerTest() {
            log('íƒ€ì´ë¨¸ ì´ˆê¸°í™”');
            stopTimerTest();
            timerState.seconds = 0;
            document.getElementById('timer-display').textContent = formatTime(0);
            document.getElementById('timer-result').innerHTML = 
                '<div class="result">ğŸ”„ íƒ€ì´ë¨¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!</div>';
        }

        function testClassStructure() {
            log('í´ë˜ìŠ¤ êµ¬ì¡° í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            try {
                // ê¸°ë³¸ì ì¸ JavaScript í´ë˜ìŠ¤ ë¬¸ë²• í…ŒìŠ¤íŠ¸
                class TestPlugin {
                    constructor() {
                        this.settings = DEFAULT_SETTINGS;
                        this.timerState = { isRunning: false, seconds: 0 };
                    }
                    
                    async loadSettings() {
                        return Object.assign({}, DEFAULT_SETTINGS);
                    }
                    
                    formatTime(seconds) {
                        return formatTime(seconds);
                    }
                }

                const testInstance = new TestPlugin();
                const results = [
                    `Plugin í´ë˜ìŠ¤: âœ… ìƒì„± ê°€ëŠ¥`,
                    `ì„¤ì • ë¡œë“œ: âœ… ${typeof testInstance.loadSettings === 'function' ? 'í•¨ìˆ˜ ì¡´ì¬' : 'í•¨ìˆ˜ ì—†ìŒ'}`,
                    `íƒ€ì´ë¨¸ ìƒíƒœ: âœ… ${testInstance.timerState ? 'ì´ˆê¸°í™”ë¨' : 'ì´ˆê¸°í™” ì•ˆë¨'}`,
                    `formatTime ë©”ì„œë“œ: âœ… ${testInstance.formatTime(65) === '00:01:05' ? 'ì •ìƒ ì‘ë™' : 'ì˜¤ë¥˜'}`
                ];

                log('í´ë˜ìŠ¤ êµ¬ì¡° í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
                document.getElementById('class-test-result').innerHTML = 
                    '<div class="result"><strong>í´ë˜ìŠ¤ êµ¬ì¡° í…ŒìŠ¤íŠ¸:</strong><br>' + 
                    results.join('<br>') + '</div>';

            } catch (error) {
                log(`í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}`);
                document.getElementById('class-test-result').innerHTML = 
                    '<div class="error">í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ' + error.message + '</div>';
            }
        }

        function testSettingsValidation() {
            log('ì„¤ì •ê°’ ìœ íš¨ì„± ê²€ì‚¬ ì‹œì‘...');
            try {
                const validations = [
                    {
                        name: 'subjects ë°°ì—´',
                        test: () => Array.isArray(DEFAULT_SETTINGS.subjects) && DEFAULT_SETTINGS.subjects.length > 0,
                        expected: 'ë°°ì—´ì´ê³  ìš”ì†Œê°€ ìˆì–´ì•¼ í•¨'
                    },
                    {
                        name: 'maxProblems ìˆ«ì',
                        test: () => typeof DEFAULT_SETTINGS.maxProblems === 'number' && DEFAULT_SETTINGS.maxProblems > 0,
                        expected: 'ì–‘ìˆ˜ì—¬ì•¼ í•¨'
                    },
                    {
                        name: 'timerEnabled ë¶ˆë¦°',
                        test: () => typeof DEFAULT_SETTINGS.timerEnabled === 'boolean',
                        expected: 'true/false ê°’ì´ì–´ì•¼ í•¨'
                    },
                    {
                        name: 'defaultSubject ë¬¸ìì—´',
                        test: () => typeof DEFAULT_SETTINGS.defaultSubject === 'string' && DEFAULT_SETTINGS.defaultSubject.length > 0,
                        expected: 'ë¹„ì–´ìˆì§€ ì•Šì€ ë¬¸ìì—´ì´ì–´ì•¼ í•¨'
                    }
                ];

                let results = [];
                validations.forEach(validation => {
                    const passed = validation.test();
                    results.push(`${validation.name}: ${passed ? 'âœ… í†µê³¼' : 'âŒ ì‹¤íŒ¨'} (${validation.expected})`);
                    log(`ê²€ì¦ ${validation.name}: ${passed ? 'í†µê³¼' : 'ì‹¤íŒ¨'}`);
                });

                document.getElementById('settings-test-result').innerHTML = 
                    '<div class="result"><strong>ì„¤ì •ê°’ ìœ íš¨ì„± ê²€ì‚¬:</strong><br>' + 
                    results.join('<br>') + '</div>';

            } catch (error) {
                log(`ì„¤ì • ê²€ì¦ ì˜¤ë¥˜: ${error.message}`);
                document.getElementById('settings-test-result').innerHTML = 
                    '<div class="error">ì„¤ì • ê²€ì¦ ì‹¤íŒ¨: ' + error.message + '</div>';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë¡œê·¸
        document.addEventListener('DOMContentLoaded', function() {
            log('Study Dashboard í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            log('main.jsì—ì„œ ì¶”ì¶œí•œ í•µì‹¬ ê¸°ëŠ¥ë“¤ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤');
        });
    </script>
</body>
</html>